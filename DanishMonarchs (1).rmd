---
title: "Danish Kings"
author: "Kresten Clausen"
date: "2025-3-5"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Load the kings

1. Look at the dataset that are you loading and check what its columns are separated by?

List what is the separator:
##Comma (csv)

2. Create a `kings` object in R with the different functions below and inspect the different outputs.
```{r}
library(tidyverse)
konger1 <- read.csv("konge - Sheet1.csv")

konger2 <- read_csv("konge - Sheet1.csv")

konger3 <- read.csv2("konge - Sheet1.csv")

konger4 <- read_csv2( "konge - Sheet1.csv")
```
Answer: 
1. Which of these functions is a `tidyverse` function? Read data with it below into a `kings` object
Konger 2 og 4, da det er _csv og ikke .csv

2. What is the result of running `class()` on the `kings` object created with a tidyverse function.
class(konger1)
"data.frame"

class(konger2)
"spec_tbl_df" "tbl_df"      "tbl"         "data.frame"

class(konger3)
"data.frame"

class(konger4)
"spec_tbl_df" "tbl_df"      "tbl"         "data.frame"
3. How many columns does the object have when created with these different functions?
ncol(konger1)
 6
ncol(konger2)
 6
ncol(konger3)
1
ncol(konger4)
1

4. Show the dataset so that we can see how R interprets each column
head viser hvordan R læser hver kolone 
```{r eval = TRUE}
konger <- read_csv("konge - Sheet1.csv")

class(konger1)
class(konger2)
class(konger3)
class(konger4)

ncol(konger1)
ncol(konger2)
ncol(konger3)
ncol(konger4)

head(konger1)
head(konger2)
head(konger3)
head(konger4)

```


## Calculate the duration of reign for all the kings in your table

```{r}
konger <- konger %>% 
  mutate(regeringsperiode = Regeringsperiode_slut_aar - Regerinsperiode_start_aar, na.rm=TRUE)
```

## Calculate the average duration of reign for all rulers
```{r}
mean(konger$regeringsperiode, na.rm =TRUE)
```


## How many and which kings enjoyed a longer-than-average duration of reign?

```{r}
konger %>% 
filter(konger$regeringsperiode >20.78431) %>% 
count(Navn,Titel,regeringsperiode)
```
##Du kan se at der er 25 konger som har haft en længere regeringsperiode end gennemsnittet

## How many days did the three longest-ruling monarchs rule? 

```{r}
konger %>% 
filter(konger$regeringsperiode >20.78431) %>% 
  mutate(regeringsperiode_dage = regeringsperiode*365.25) %>% 
  arrange(desc(regeringsperiode_dage)) %>%
  slice(1:3)
## .25 pga skudår, så den kun tæller for hvert 4. år som 366
```


## Challenge: Plot the kings' duration of reign through time



```{r}
konger %>% 
  mutate(Midt_år = konger$Regerinsperiode_start_aar + konger$regeringsperiode/2) %>% 
  mutate(navn_og_titel = paste(Navn,Titel)) %>% 
  ggplot(aes(x=Midt_år, y=regeringsperiode))+geom_point(aes(color = navn_og_titel))
```


